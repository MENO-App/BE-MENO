name: Backend CI
 
on:

  push:

    branches: ["master"]

  pull_request:

    branches: ["master"]
 
env:

  DOTNET_VERSION: "8.0.x"
 
jobs:

  build_test_deploy:

    runs-on: ubuntu-latest
 
    steps:

      - name: Checkout

        uses: actions/checkout@v4
 
      - name: Setup .NET

        uses: actions/setup-dotnet@v4

        with:

          dotnet-version: ${{ env.DOTNET_VERSION }}
 
      - name: Restore

        run: dotnet restore MENO.sln
 
      - name: Build

        run: dotnet build MENO.sln --configuration Release --no-restore
 
      - name: Test

        run: dotnet test MENO.sln --configuration Release --no-build --verbosity normal
 
      # Publish output (zip) for deployment

      - name: Publish

        run: dotnet publish API/API.csproj -c Release -o ./publish
 
      # Deploy to Azure App Service using Publish Profile secret

 
